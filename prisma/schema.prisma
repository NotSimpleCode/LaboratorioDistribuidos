generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "mysql"
  url      = env("DATABASE_URL")
}

model tipo_documentos {
  id_tipo_documento Int        @id
  tipo_documento    String     @db.Char(2)
  usuarios          usuarios[]
}

model usuarios {
  documento_usuario        Int              @id @db.UnsignedInt
  tipo_documento_usuario   Int?             @default(1)
  nombre_usuario           String           @db.VarChar(20)
  apellido_usuario         String           @db.VarChar(20)
  celular_usuario          String           @db.VarChar(24)
  fecha_registro_usuario   DateTime         @db.Date
  estado_usuario           String?          @default("A") @db.Char(1)
  direccion_usuario        String?          @db.VarChar(200)
  fecha_nacimiento_usuario DateTime?        @db.Date
  foto_usuario             String?          @db.VarChar(200)
  tipo_documentos          tipo_documentos? @relation(fields: [tipo_documento_usuario], references: [id_tipo_documento], onDelete: NoAction, onUpdate: NoAction, map: "usuarios_ibfk_1")
  usuarios_roles           usuarios_roles[]

  @@index([tipo_documento_usuario], map: "tipo_documento_usuario")
}

model usuarios_roles {
  id_usuario       Int      @db.UnsignedInt
  id_rol           Int
  nick_usuario     String   @unique(map: "nick_usuario") @db.VarChar(40)
  password_usuario String   @db.VarChar(255)
  estado_cuenta    String?  @default("A") @db.Char(1)
  roles            roles    @relation(fields: [id_rol], references: [id_rol], onDelete: NoAction, onUpdate: NoAction, map: "usuarios_roles_ibfk_2")
  usuarios         usuarios @relation(fields: [id_usuario], references: [documento_usuario], onDelete: NoAction, onUpdate: NoAction, map: "usuarios_roles_ibfk_1")

  @@id([id_usuario, id_rol])
  @@index([id_rol], map: "id_rol")
}

model roles {
  id_rol                Int              @id
  nombre_rol            String           @db.VarChar(20)
  fecha_creacion_rol    DateTime         @db.DateTime(0)
  estado_rol            String?          @default("A") @db.Char(1)
  descripcion_rol       String?          @db.VarChar(100)
  numero_personas_roles Int?             @default(0)
  usuarios_roles        usuarios_roles[]
}

model log_updates {
  id_update      Int       @id @default(autoincrement())
  table_name_log String    @db.VarChar(40)
  date_log       DateTime? @default(now()) @db.Timestamp(0)
}
